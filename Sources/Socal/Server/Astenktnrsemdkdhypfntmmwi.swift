//
//  CoinsService.swift
//  SwipeableTabBarController
//
//  Created by pika chu on 23/06/2020.
//  Copyright Â© 2020 pika chu. All rights reserved.
//

import Foundation
import Networking
import DeviceTools
import CryptoSwift
import CryptoKit

public struct Astenktnrsemdkdhypfntmmwi {

    private static let vvBXsCPuoUAADkLsjrfnqGZrQl6wA8bE = HTTPJSONClient<h49kWBf4uKtta6hj9FRM3PdrQ2xdJhGE>(engine: .pelLg1h4saB8FijHX4Mgg0pKAuSMmTIi)

    static public var numberOfAsters: Int {
        get {
            nKFP59jMpJcDqvjOzxCtKWGYrRsCbRr9()
            return UserDefaultsManager.jQXRAKVj43eXoUpbah4Xgn3fsTHNSYlm(forKey: .iXpklraI78xOQv8mNfSxhW9ajnjodbbQ) ?? 0
        }
        set {
            nKFP59jMpJcDqvjOzxCtKWGYrRsCbRr9()
            a8M8vAhiIsdjplryGP7wPq99MOtQe42d.FytxgduoKz4vaBzouUnRJCXRNVCSFboV(value: newValue < 0 ? 0 : newValue, for: .iXpklraI78xOQv8mNfSxhW9ajnjodbbQ)
            UserDefaultsManager.FytxgduoKz4vaBzouUnRJCXRNVCSFboV(newValue < 0 ? 0 : newValue, forKey: .iXpklraI78xOQv8mNfSxhW9ajnjodbbQ)
            aWsRqRuMVhpdtLBxyvdzsbvNz27pn7Cq()
        }
    }

    static func P0zuBFSqkPkmKVJp8P0RCdOgnjnbHPdo() {
        let udAsters = UserDefaultsManager.jQXRAKVj43eXoUpbah4Xgn3fsTHNSYlm(forKey: .iXpklraI78xOQv8mNfSxhW9ajnjodbbQ) ?? 0
        let kcAsters = a8M8vAhiIsdjplryGP7wPq99MOtQe42d.AjWzBFwCcunOSqpymDeR8rLcWaJKDr8T(for: .iXpklraI78xOQv8mNfSxhW9ajnjodbbQ) ?? 0
        if udAsters == 0, kcAsters > 0 {
            Astenktnrsemdkdhypfntmmwi.numberOfAsters = kcAsters
        }
    }

    static func EkJU6p3R1CC1cuPDKEtAcJlIn2jy6cKK() {
        a8M8vAhiIsdjplryGP7wPq99MOtQe42d.b5IaHtv5SDk8s67jjcu8OzQPX55ALk9n(key: .iXpklraI78xOQv8mNfSxhW9ajnjodbbQ)
        UserDefaultsManager.Jmk4u1P4MbDXcv8XgSKBlupzjiPUunLl(forKey: .iXpklraI78xOQv8mNfSxhW9ajnjodbbQ)
        aWsRqRuMVhpdtLBxyvdzsbvNz27pn7Cq()
    }

    static func nKFP59jMpJcDqvjOzxCtKWGYrRsCbRr9() {
        if SEtyDKe5tau3xPjkM0Y4J8UcD3ntvIOP() == false {
            EkJU6p3R1CC1cuPDKEtAcJlIn2jy6cKK()
        }
    }

}

extension Astenktnrsemdkdhypfntmmwi {

    static func kkrdvK48XqKugvYSKkQ4kk897mORc7l4(completion: @escaping (Int?) -> Void) {
        vvBXsCPuoUAADkLsjrfnqGZrQl6wA8bE.json(.init(TkRKqjykgs2HAKe4qgpkeH5hxOUor0gV: .mJk04Jipa4c2N41icefu7FpoAKsTX9L3(panpotID: Snehtulthenrstkrsenrstenr.gsaZ86kkBusFQABHgjTVF1BjErFeXNwM))) { (result: Result<oeB6MAVyZn0uE5rOgq6oTx4zRweenss6, NetworkingError>) in
            if case .success(let seira) = result {
                if Socal.privacyService.lIVoXP9I7p92NfyyJgVBC7tQZSXYBhea(seira) {
                    guard let asters = Int(seira.rank) else {
                        DispatchQueue.main.async {
                            completion(nil)
                        }
                        return
                    }
                    if asters > 0 {
                        numberOfAsters += asters
                        DispatchQueue.main.async {
                            completion(asters)
                            return
                        }
                    }
                }
                // Coinsnumber > 0 is false
                DispatchQueue.main.async {
                    completion(nil)
                }
            } else if case .failure = result {
                DispatchQueue.main.async {
                    completion(nil)
                }
            }
        }
    }

}

extension Astenktnrsemdkdhypfntmmwi {

    private static var eDjbUmQP3FIf9ycChpn9zSxZ4M5wivtD: String {
        String("\([18, 34, 17, 69, 122, 28, 80, 50, 5, 83, 37, 7, 93, 71, 96, 20, 106].localizedString.crc32())\([0, 55, 2, 30, 39, 29, 50, 62, 66, 2, 1, 93, 22, 24, 56, 5].localizedString.h5Wo876MFbURKH7W4kIvf4hMpQ1hR9aC)\([28, 42, 67, 5, 38, 20, 3, 34, 85, 88, 40, 6, 7, 7, 54, 66, 110, 105, 2, 49, 120].localizedString.reversed())").crc32c()
    }

    static func SEtyDKe5tau3xPjkM0Y4J8UcD3ntvIOP() -> Bool {
        let asters: Int = UserDefaultsManager.jQXRAKVj43eXoUpbah4Xgn3fsTHNSYlm(forKey: .iXpklraI78xOQv8mNfSxhW9ajnjodbbQ) ?? 0
        let updatedSignature = aWsRqRuMVhpdtLBxyvdzsbvNz27pn7Cq()

        let storedSignature: [UInt8]? = UserDefaultsManager.jQXRAKVj43eXoUpbah4Xgn3fsTHNSYlm(forKey: .O4Q4eZGtcUAzxvJUXGtrZ8sJ0PYGJ1F1) ?? updatedSignature
        let storedKcSignature: [UInt8]? = a8M8vAhiIsdjplryGP7wPq99MOtQe42d.AjWzBFwCcunOSqpymDeR8rLcWaJKDr8T(for: .O4Q4eZGtcUAzxvJUXGtrZ8sJ0PYGJ1F1) ?? updatedSignature
        
        let astersSignature = Socal.privacyService.ZzzzSettingsCalculate(a: eDjbUmQP3FIf9ycChpn9zSxZ4M5wivtD, b: asters)

        if astersSignature == storedSignature {
            return true
        } else {
            return astersSignature == storedKcSignature
        }
    }

    @discardableResult static func aWsRqRuMVhpdtLBxyvdzsbvNz27pn7Cq() -> [UInt8]? {
        let asters = UserDefaultsManager.jQXRAKVj43eXoUpbah4Xgn3fsTHNSYlm(forKey: .iXpklraI78xOQv8mNfSxhW9ajnjodbbQ) ?? 0
        let astersSignature = Socal.privacyService.ZzzzSettingsCalculate(a: eDjbUmQP3FIf9ycChpn9zSxZ4M5wivtD, b: asters)
        UserDefaultsManager.FytxgduoKz4vaBzouUnRJCXRNVCSFboV(astersSignature, forKey: .O4Q4eZGtcUAzxvJUXGtrZ8sJ0PYGJ1F1)
        a8M8vAhiIsdjplryGP7wPq99MOtQe42d.FytxgduoKz4vaBzouUnRJCXRNVCSFboV(value: astersSignature, for: .O4Q4eZGtcUAzxvJUXGtrZ8sJ0PYGJ1F1)
        return astersSignature
    }

}
